DROP TABLE IF EXISTS t1, t2, t3;
CREATE TABLE t1 (b INT PRIMARY KEY);
CREATE TABLE t2 (a INT NOT NULL, b INT NOT NULL, c INT NOT NULL, INDEX(c), FOREIGN KEY (b) REFERENCES t1(b) ON UPDATE CASCADE ON DELETE CASCADE);
CREATE TABLE t3 (a INT NOT NULL, c INT NOT NULL, FOREIGN KEY (c) REFERENCES t2(c) ON UPDATE CASCADE ON DELETE CASCADE);
INSERT INTO t1 (b) VALUES (100),(200),(300);
INSERT INTO t2 (a,b,c) VALUES (1,100,1000),(2,200,2000),(3,300,3000);
INSERT INTO t3 (a,c) VALUES (1,1000),(2,2000),(3,3000);
UPDATE t1 SET b=400 WHERE b=300;
DELETE FROM t1 WHERE b=200;
SELECT * from t1;
b
100
400
SELECT * from t2;
a	b	c
1	100	1000
3	400	3000
SELECT * from t3;
a	c
1	1000
3	3000
DROP TABLE t3;
DROP TABLE t2;
DROP TABLE t1;
